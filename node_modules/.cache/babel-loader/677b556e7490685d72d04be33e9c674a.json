{"ast":null,"code":"import { default as instance } from \"axios\";\nimport cookie from '@/plugins/cookie';\nimport store from '@/store';\nlet axios = instance.create({\n  baseURL: process.env.VUE_APP_API,\n  timeout: 60 * 1000,\n  validateStatus: function (status) {\n    return status >= 200 && status < 400;\n  }\n});\naxios.CancelToken = instance.CancelToken;\naxios.isCancel = instance.isCancel;\naxios.interceptors.request.use(function (config) {\n  let token = cookie.get(\"test_token\");\n\n  if (token) {\n    config.headers[\"Authorization\"] = token;\n  }\n\n  return config;\n});\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response.status === 401) {\n    store.dispatch(\"auth/logout\");\n  }\n\n  return Promise.reject(error.response);\n});\nexport default axios;","map":{"version":3,"names":["default","instance","cookie","store","axios","create","baseURL","process","env","VUE_APP_API","timeout","validateStatus","status","CancelToken","isCancel","interceptors","request","use","config","token","get","headers","response","error","dispatch","Promise","reject"],"sources":["/Users/trantam/Documents/Learn FE Dev/VueJS/vuejs-fe-project-team3-demo/src/plugins/axios.js"],"sourcesContent":["import { default as instance } from \"axios\";\nimport cookie from '@/plugins/cookie'\nimport store from '@/store'\nlet axios = instance.create({\n  baseURL: process.env.VUE_APP_API,\n  timeout: 60 * 1000,\n  validateStatus: function (status) {\n    return status >= 200 && status < 400;\n  },\n});\naxios.CancelToken = instance.CancelToken;\naxios.isCancel = instance.isCancel;\naxios.interceptors.request.use(function (config) {\n  let token = cookie.get(\"test_token\");\n  if (token) {\n    config.headers[\"Authorization\"] =  token;\n  }\n  return config;\n});\naxios.interceptors.response.use(\n  function (response) {\n    return response;\n  },\n  function (error) {\n    if (error.response.status === 401) {\n      store.dispatch(\"auth/logout\");\n    }\n    return Promise.reject(error.response);\n  },\n);\nexport default axios;\n"],"mappings":"AAAA,SAASA,OAAO,IAAIC,QAApB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,IAAIC,KAAK,GAAGH,QAAQ,CAACI,MAAT,CAAgB;EAC1BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,WADK;EAE1BC,OAAO,EAAE,KAAK,IAFY;EAG1BC,cAAc,EAAE,UAAUC,MAAV,EAAkB;IAChC,OAAOA,MAAM,IAAI,GAAV,IAAiBA,MAAM,GAAG,GAAjC;EACD;AALyB,CAAhB,CAAZ;AAOAR,KAAK,CAACS,WAAN,GAAoBZ,QAAQ,CAACY,WAA7B;AACAT,KAAK,CAACU,QAAN,GAAiBb,QAAQ,CAACa,QAA1B;AACAV,KAAK,CAACW,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAUC,MAAV,EAAkB;EAC/C,IAAIC,KAAK,GAAGjB,MAAM,CAACkB,GAAP,CAAW,YAAX,CAAZ;;EACA,IAAID,KAAJ,EAAW;IACTD,MAAM,CAACG,OAAP,CAAe,eAAf,IAAmCF,KAAnC;EACD;;EACD,OAAOD,MAAP;AACD,CAND;AAOAd,KAAK,CAACW,YAAN,CAAmBO,QAAnB,CAA4BL,GAA5B,CACE,UAAUK,QAAV,EAAoB;EAClB,OAAOA,QAAP;AACD,CAHH,EAIE,UAAUC,KAAV,EAAiB;EACf,IAAIA,KAAK,CAACD,QAAN,CAAeV,MAAf,KAA0B,GAA9B,EAAmC;IACjCT,KAAK,CAACqB,QAAN,CAAe,aAAf;EACD;;EACD,OAAOC,OAAO,CAACC,MAAR,CAAeH,KAAK,CAACD,QAArB,CAAP;AACD,CATH;AAWA,eAAelB,KAAf"},"metadata":{},"sourceType":"module"}