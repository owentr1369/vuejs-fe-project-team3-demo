{"ast":null,"code":"export default async function ({\n  next,\n  to,\n  store\n}) {\n  let token = store.getters[\"auth/getToken\"];\n\n  if (token) {\n    let user = store.getters[\"auth/getUser\"];\n\n    if (!user) {\n      try {\n        await store.dispatch(\"auth/fetchUser\");\n        return true;\n      } catch (error) {\n        if (error.status == 401) {\n          store.dispatch(\"auth/logout\");\n          next({\n            name: \"Login\"\n          });\n          return false;\n        } else {\n          store.commit(\"setLoadingError\", true);\n          return false;\n        }\n      }\n    } else {\n      return true;\n    }\n  }\n\n  store.dispatch(\"auth/logout\");\n  next({\n    name: \"Login\"\n  });\n  return false;\n}","map":{"version":3,"names":["next","to","store","token","getters","user","dispatch","error","status","name","commit"],"sources":["/Users/trantam/Documents/Learn FE Dev/VueJS/vuejs-fe-project-team3-demo/src/middlewares/auth.js"],"sourcesContent":["export default async function ({ next, to, store }) {\n  let token = store.getters[\"auth/getToken\"];\n  if (token) {\n    let user = store.getters[\"auth/getUser\"];\n    if (!user) {\n      try {\n        await store.dispatch(\"auth/fetchUser\");\n        return true;\n      } catch (error) {\n        if (error.status == 401) {\n          store.dispatch(\"auth/logout\");\n          next({\n            name: \"Login\",\n          });\n          return false;\n        } else {\n          store.commit(\"setLoadingError\", true);\n          return false;\n        }\n      }\n    } else {\n      return true;\n    }\n  }\n  store.dispatch(\"auth/logout\");\n  next({\n    name: \"Login\",\n  });\n  return false;\n}\n"],"mappings":"AAAA,eAAe,gBAAgB;EAAEA,IAAF;EAAQC,EAAR;EAAYC;AAAZ,CAAhB,EAAqC;EAClD,IAAIC,KAAK,GAAGD,KAAK,CAACE,OAAN,CAAc,eAAd,CAAZ;;EACA,IAAID,KAAJ,EAAW;IACT,IAAIE,IAAI,GAAGH,KAAK,CAACE,OAAN,CAAc,cAAd,CAAX;;IACA,IAAI,CAACC,IAAL,EAAW;MACT,IAAI;QACF,MAAMH,KAAK,CAACI,QAAN,CAAe,gBAAf,CAAN;QACA,OAAO,IAAP;MACD,CAHD,CAGE,OAAOC,KAAP,EAAc;QACd,IAAIA,KAAK,CAACC,MAAN,IAAgB,GAApB,EAAyB;UACvBN,KAAK,CAACI,QAAN,CAAe,aAAf;UACAN,IAAI,CAAC;YACHS,IAAI,EAAE;UADH,CAAD,CAAJ;UAGA,OAAO,KAAP;QACD,CAND,MAMO;UACLP,KAAK,CAACQ,MAAN,CAAa,iBAAb,EAAgC,IAAhC;UACA,OAAO,KAAP;QACD;MACF;IACF,CAhBD,MAgBO;MACL,OAAO,IAAP;IACD;EACF;;EACDR,KAAK,CAACI,QAAN,CAAe,aAAf;EACAN,IAAI,CAAC;IACHS,IAAI,EAAE;EADH,CAAD,CAAJ;EAGA,OAAO,KAAP;AACD"},"metadata":{},"sourceType":"module"}