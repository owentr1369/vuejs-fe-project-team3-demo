{"ast":null,"code":"import api from \"@/plugins/api\";\nimport cookie from \"@/plugins/cookie\";\nlet token = cookie.get('test_token');\nconst state = {\n  is_logged: false,\n  user: null,\n  token: token ? token : ''\n};\nconst getters = {\n  isLogged(state) {\n    return state.user ? true : false;\n  },\n\n  getUser(state) {\n    return state.user;\n  },\n\n  getToken(state) {\n    return state.token;\n  }\n\n};\nconst mutations = {\n  setUser(state, payload) {\n    console.log('set user ');\n    console.log(payload);\n    state.user = payload;\n  },\n\n  removeUser(state) {\n    state.user = null;\n  },\n\n  setToken(state, payload) {\n    state.token = payload;\n    cookie.set(\"test_token\", payload, {\n      expires: 7\n    });\n  },\n\n  removeToken(state) {\n    state.token = \"\";\n    cookie.remove(\"test_token\");\n  }\n\n};\nconst actions = {\n  async login({\n    commit\n  }, payload) {\n    try {\n      let res = await api.AUTH.login(payload);\n      let {\n        status,\n        data\n      } = res;\n\n      if (status && data) {\n        commit(\"setToken\", data.token);\n      }\n\n      return res;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  async register({\n    commit\n  }, payload) {\n    try {\n      let res = await api.AUTH.register(payload);\n      let {\n        status,\n        data\n      } = res;\n\n      if (status && data) {\n        commit(\"setToken\", data.token);\n      }\n\n      return res;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  async fetchUser({\n    commit\n  }, payload) {\n    try {\n      let res = await api.AUTH.fetchUser();\n      let {\n        data\n      } = res;\n\n      if (data) {\n        commit(\"setUser\", data);\n      }\n\n      return res;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  logout({\n    commit\n  }) {\n    commit(\"removeUser\");\n    commit(\"removeToken\");\n  }\n\n};\nexport default {\n  state,\n  mutations,\n  getters,\n  actions,\n  namespaced: true\n};","map":{"version":3,"names":["api","cookie","token","get","state","is_logged","user","getters","isLogged","getUser","getToken","mutations","setUser","payload","console","log","removeUser","setToken","set","expires","removeToken","remove","actions","login","commit","res","AUTH","status","data","error","register","fetchUser","logout","namespaced"],"sources":["/Users/trantam/Documents/Learn FE Dev/VueJS/vuejs-fe-project-team3-demo/src/store/auth.js"],"sourcesContent":["import api from \"@/plugins/api\";\nimport cookie from \"@/plugins/cookie\";\nlet token = cookie.get('test_token')\nconst state = {\n  is_logged: false,\n  user: null,\n  token: token ? token : '',\n};\n\nconst getters = {\n  isLogged(state) {\n    return state.user ? true : false;\n  },\n  getUser(state) {\n    return state.user;\n  },\n  getToken(state) {\n    return state.token;\n  },\n};\n\nconst mutations = {\n  setUser(state, payload) {\n    console.log('set user ');\n    console.log(payload);\n    state.user = payload;\n  },\n  removeUser(state) {\n    state.user = null;\n  },\n  setToken(state, payload) {\n    state.token = payload;\n    cookie.set(\"test_token\", payload, {\n      expires: 7,\n    });\n  },\n  removeToken(state) {\n    state.token = \"\";\n    cookie.remove(\"test_token\");\n  },\n};\n\nconst actions = {\n  \n  async login({ commit }, payload) {\n    try {\n      let res = await api.AUTH.login(payload);\n      let { status, data } = res;\n      if (status && data) {\n        commit(\"setToken\", data.token);\n      }\n      return res;\n    } catch (error) {\n      throw error;\n    }\n  },\n  async register({ commit }, payload) {\n    try {\n      let res = await api.AUTH.register(payload);\n      let { status, data } = res;\n      if (status && data) {\n        commit(\"setToken\", data.token);\n      }\n      return res;\n    } catch (error) {\n      throw error;\n    }\n  },\n  async fetchUser({ commit }, payload) {\n    try {\n      let res = await api.AUTH.fetchUser();\n      let { data } = res;\n      if (data) {\n        commit(\"setUser\", data);\n      }\n      return res\n    } catch (error) {\n      throw error;\n    }\n  },\n  logout({ commit }) {\n    commit(\"removeUser\");\n    commit(\"removeToken\");\n  },\n};\n\nexport default {\n  state,\n  mutations,\n  getters,\n  actions,\n  namespaced: true,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}